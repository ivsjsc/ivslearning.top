<!DOCTYPE html>
<html class="dark scroll-smooth" lang="vi">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>IVS Learning Hub - Trung Tâm Học Tập & Ứng Dụng IVS JSC</title>
    <!-- SEO Meta Tags -->
    <meta content="Truy cập IVS Learning Hub - Cổng vào hệ sinh thái giáo dục, công nghệ và các ứng dụng học tập tương tác của IVS JSC. Đồng bộ tài khoản Firebase." name="description"/>
    <meta content="IVS Learning Hub, IVS JSC, EdTech, Ứng dụng Giáo dục, Hệ sinh thái IVS, Firebase Auth" name="keywords"/>
    <link href="/images/logo/logo.svg" rel="icon" type="image/svg+xml"/>
    
    <!-- Fonts, Tailwind CSS & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="css/tailwind.css" rel="stylesheet"/>
    <link href="css/modern-ui.css" rel="stylesheet"/>
    <link href="css/design-system.css" rel="stylesheet"/>
    <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" referrerpolicy="no-referrer" rel="stylesheet"/>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!-- Firebase CDN Initialization for Global Access (v12.5.0) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-analytics.js";
        import { firebaseConfig } from "/js/firebase-config.js";

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const analytics = getAnalytics(app);

        window.firebaseApp = app;
        window.firebaseAuth = auth;
        window.firebaseDB = db;
        window.firebaseAnalytics = analytics;
        
        // Theo dõi trạng thái đăng nhập và cập nhật UI (Cần thiết cho Trang chủ)
        onAuthStateChanged(auth, (user) => {
            const headerAuthContainer = document.getElementById('header-auth-container');
            const mobileAuthContainer = document.getElementById('mobile-auth-container');
            const heroAuthCta = document.getElementById('hero-auth-cta');
            
            // Hàm tạo nút cho Logged-in User
            function createUserAuthUI(user) {
                const emailPart = user.email.split('@')[0];
                return {
                    header: `
                        <a href="dashboard.html" class="header-auth-button header-auth-user">
                            <i class="fas fa-user-circle"></i> ${emailPart}
                        </a>
                        <button class="header-auth-button header-auth-logout logout-btn" style="gap: 8px;">
                            <i class="fas fa-sign-out-alt"></i> Đăng xuất
                        </button>
                    `,
                    mobile: `
                        <a href="dashboard.html" class="mobile-auth-button" style="background: linear-gradient(135deg, var(--color-success), #059669); color: white;">
                            <i class="fas fa-user-circle"></i> Xem Dashboard
                        </a>
                        <button class="mobile-auth-button logout-btn" style="background: linear-gradient(135deg, var(--color-error), #dc2626); color: white;">
                            <i class="fas fa-sign-out-alt"></i> Đăng Xuất
                        </button>
                    `
                };
            }

            // Hàm tạo nút Đăng nhập/Đăng ký
            function createLoginAuthUI() {
                return {
                    header: `
                        <a href="auth.html" class="header-auth-button header-auth-login">
                            <i class="fas fa-sign-in-alt"></i> Đăng nhập
                        </a>
                        <a href="auth.html" class="header-auth-button header-auth-signup">
                            <i class="fas fa-user-plus"></i> Đăng ký
                        </a>
                    `,
                    mobile: `
                        <a href="auth.html" class="mobile-auth-button" style="background: linear-gradient(135deg, var(--color-primary), var(--color-primary-light)); color: white;">
                            <i class="fas fa-sign-in-alt"></i> Đăng nhập / Đăng ký
                        </a>
                    `
                };
            }

            // Update Header & Mobile Auth UI
            if (headerAuthContainer && mobileAuthContainer) {
                if (user) {
                    const authUI = createUserAuthUI(user);
                    headerAuthContainer.innerHTML = authUI.header;
                    mobileAuthContainer.innerHTML = authUI.mobile;
                    
                    // Logout listeners
                    headerAuthContainer.querySelectorAll('.logout-btn').forEach(btn => {
                        btn.addEventListener('click', async (e) => {
                            e.preventDefault();
                            try {
                                await signOut(auth);
                                window.location.reload();
                            } catch (error) {
                                console.error("Lỗi đăng xuất:", error);
                            }
                        });
                    });
                    mobileAuthContainer.querySelectorAll('.logout-btn').forEach(btn => {
                        btn.addEventListener('click', async (e) => {
                            e.preventDefault();
                            try {
                                await signOut(auth);
                                window.location.reload();
                            } catch (error) {
                                console.error("Lỗi đăng xuất:", error);
                            }
                        });
                    });
                    
                    // Update Hero CTA
                    if (heroAuthCta) {
                        heroAuthCta.innerHTML = `
                            <a href="dashboard.html" class="btn btn-lg btn-success">
                                <i class="fas fa-rocket"></i> Đi đến Dashboard
                            </a>
                        `;
                    }
                } else {
                    const authUI = createLoginAuthUI();
                    headerAuthContainer.innerHTML = authUI.header;
                    mobileAuthContainer.innerHTML = authUI.mobile;
                    
                    // Update Hero CTA
                    if (heroAuthCta) {
                        heroAuthCta.innerHTML = `
                            <a href="auth.html" class="btn btn-lg btn-primary">
                                <i class="fas fa-sign-in-alt"></i> Bắt đầu học tập ngay
                            </a>
                        `;
                    }
                }
            }

            // Đồng bộ trạng thái Auth cho Mobile
            const authContainerMobile = document.getElementById('auth-status-container-mobile');
            if (authContainerMobile) {
                authContainerMobile.innerHTML = user ? createHeaderAuth(user) : createHeaderLogin();
                
                // Re-attach logout listeners for mobile
                const logoutBtnsMobile = authContainerMobile.querySelectorAll('.logout-btn-header-btn');
                logoutBtnsMobile.forEach(btn => {
                    btn.addEventListener('click', async () => {
                        try {
                            await signOut(auth);
                            window.location.reload(); 
                        } catch (error) {
                            console.error("Lỗi đăng xuất:", error);
                        }
                    });
                });
            }
        });

        // Hằng số màu sắc (Dựa trên live_index.html)
        const IVS_COLORS = {
            'ivs-bg': '#1a1a1a',
            'ivs-card': '#111111',
            'ivs-border': '#27272A',
            'ivs-blue': '#4c5ef7',
            'ivs-green': '#10b981', 
            'ivs-cyan': '#22d3ee',
            'ivs-orange': '#f97316',
            'ivs-purple': '#8b5cf6',
            'ivs-red': '#ef4444',
            'ivs-text-primary': '#f4f4f5',
            'ivs-text-secondary': '#a1a1aa'
        };

        // Thiết lập biến CSS cho Tailwind JIT/Custom Styles
        document.documentElement.style.setProperty('--ivs-bg', IVS_COLORS['ivs-bg']);
        document.documentElement.style.setProperty('--ivs-card', IVS_COLORS['ivs-card']);
        document.documentElement.style.setProperty('--ivs-border', IVS_COLORS['ivs-border']);
        document.documentElement.style.setProperty('--ivs-blue', IVS_COLORS['ivs-blue']);
        document.documentElement.style.setProperty('--ivs-green', IVS_COLORS['ivs-green']);
        document.documentElement.style.setProperty('--ivs-cyan', IVS_COLORS['ivs-cyan']);
        document.documentElement.style.setProperty('--ivs-orange', IVS_COLORS['ivs-orange']);
        document.documentElement.style.setProperty('--ivs-purple', IVS_COLORS['ivs-purple']);
        document.documentElement.style.setProperty('--ivs-text-secondary', IVS_COLORS['ivs-text-secondary']);

        // Mobile Menu Toggle Handler
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        
        if (mobileMenuToggle && mobileMenuOverlay) {
            // Open menu
            mobileMenuToggle.addEventListener('click', () => {
                mobileMenuOverlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            });
            
            // Close menu on link click
            mobileMenuOverlay.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenuOverlay.classList.remove('active');
                    document.body.style.overflow = 'auto';
                });
            });
            
            // Close menu on Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && mobileMenuOverlay.classList.contains('active')) {
                    mobileMenuOverlay.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
        }
    </script>

    <style>
        /* BASE STYLES & COLORS */
        body { 
            background-color: var(--ivs-bg); 
            color: var(--ivs-text-primary); 
            font-family: 'Be Vietnam Pro', sans-serif;
        }
        .ivs-card { 
            background: var(--ivs-card); 
            border: 1px solid var(--ivs-border); 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .ivs-border { border-color: var(--ivs-border); }

        /* HERO SECTION */
        .hero-banner {
            background: linear-gradient(135deg, rgba(76, 94, 247, 0.15) 0%, rgba(22, 163, 74, 0.1) 50%, rgba(34, 211, 238, 0.15) 100%), linear-gradient(180deg, #1a1a1a 0%, #0f0f0f 100%);
            background-attachment: fixed;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        .hero-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 10% 90%, rgba(76, 94, 247, 0.15) 0%, transparent 40%),
                        radial-gradient(circle at 90% 10%, rgba(16, 185, 129, 0.15) 0%, transparent 40%);
            z-index: 0;
        }

        /* CARD STYLING */
        .app-card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: #151515; /* Nền tối hơn một chút */
        }
        .app-card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px -5px rgba(0,0,0,0.5);
            border-color: var(--ivs-cyan); 
        }

        /* BUTTON GLOW EFFECT (Hero CTA) */
        .btn-glow {
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        .btn-glow::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.7s ease-out;
            border-radius: 50%;
            z-index: -1;
            transform: translate(-50%, -50%) scale(0);
        }
        .btn-glow:hover::before {
            transform: translate(-50%, -50%) scale(1);
            opacity: 0;
        }
        .btn-glow:hover {
            box-shadow: 0 0 20px rgba(76, 94, 247, 0.7);
        }

        /* GLOBAL UTILITIES */
        .text-ivs-blue { color: var(--ivs-blue); }
        .text-ivs-green { color: var(--ivs-green); }
        .bg-ivs-blue { background-color: var(--ivs-blue); }
        .bg-ivs-green { background-color: var(--ivs-green); }
        .bg-ivs-red { background-color: var(--ivs-red); }
        .text-ivs-text-secondary { color: var(--ivs-text-secondary); }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .hero-banner {
                min-height: 60vh;
            }
            .hero-banner h1 {
                font-size: 2.5rem;
            }
            .hero-banner p {
                font-size: 1.125rem;
            }
            .lg\:hidden {
                display: block;
            }
        }
    </style>
</head>
<body class="bg-ivs-bg text-ivs-text-primary antialiased">

    <!-- Header injected by component-loader-v2 -->

    <main class="pt-20">


    </main>
    
    <!-- Scripts -->
    <script defer="" src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Khởi tạo AOS
            if (typeof AOS !== 'undefined') {
                AOS.init({
                    duration: 800,
                    once: true,
                    offset: 50,
                    easing: 'ease-out-quad',
                });
            }
            
            // Logic Smooth Scroll (Lấy từ live_index.html)
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        const headerOffset = 70; 
                        const elementPosition = target.getBoundingClientRect().top;
                        const offsetPosition = window.pageYOffset + elementPosition - headerOffset;

                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // Tải logic Firebase Auth Controller (Mặc dù logic auth cơ bản đã nằm trong module script phía trên)
            // Tải các script khác (utils, language, loadComponents)
            const scriptFiles = [
                "js/utils.js",
                "js/language.js",
                "ai/js/loadComponents.js"
            ];

            scriptFiles.forEach(src => {
                const script = document.createElement('script');
                script.src = src;
                script.defer = true;
                document.body.appendChild(script);
            });
            
            // Xử lý Mobile Menu (Fixed Logic with Close Button)
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const mobileMenuClose = document.getElementById('mobile-menu-close');
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');

            function openMobileMenu() {
                mobileMenuOverlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                mobileMenuOverlay.focus(); // Focus trap
            }

            function closeMobileMenu() {
                mobileMenuOverlay.classList.add('hidden');
                document.body.style.overflow = '';
                mobileMenuToggle?.focus(); // Restore focus
            }

            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', openMobileMenu);
            }

            if (mobileMenuClose) {
                mobileMenuClose.addEventListener('click', closeMobileMenu);
            }

            // Đóng menu khi click vào link
            if (mobileMenuOverlay) {
                mobileMenuOverlay.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', closeMobileMenu);
                });
                
                // Đóng khi nhấn Escape
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && !mobileMenuOverlay.classList.contains('hidden')) {
                        closeMobileMenu();
                    }
                });
            }
        });
    </script>
    
    <!-- Modern UI Components (Modals, Dropdowns, Accordions, Tabs) -->
    <script src="js/modern-ui-components.js"></script>
    
    <!-- Component Loader v2 - Load header, footer, bottom nav -->
    <script defer src="js/component-loader-v2.js"></script>
    
    <!-- API Service Initialization -->
    <script>
        // Set backend URL - replace with your actual backend URL
        window.BACKEND_URL = window.BACKEND_URL || 'http://localhost:3000';
    </script>
    <script src="js/api-init.js"></script>
    
    <!-- AOS Animations -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init({
        duration: 800,
        easing: 'ease-in-out',
        once: true,
        offset: 100
      });
    </script>
</body>
</html>