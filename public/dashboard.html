<!DOCTYPE html>
<html class="dark scroll-smooth" lang="vi">
<head>
    <link crossorigin="" href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet"/>
    <link href="//cdnjs.cloudflare.com" rel="dns-prefetch"/>
    <link href="//fonts.gstatic.com" rel="dns-prefetch"/>
    <link href="//unpkg.com" rel="dns-prefetch"/>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Dashboard - IVS Learning Hub</title>
    <link href="/images/logo/logo.svg" rel="icon" type="image/svg+xml"/>
    <link href="css/tailwind.css" rel="stylesheet"/>
    <link href="css/modern-ui.css" rel="stylesheet"/>
    <link href="css/design-system.css" rel="stylesheet"/>
    <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" referrerpolicy="no-referrer" rel="stylesheet"/>
    <link href="css/styles.css" rel="stylesheet"/>
    <!-- Firebase CDN v12.5.0 -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-analytics.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";
        import { firebaseConfig } from "/js/firebase-config.js";

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);

        window.firebaseApp = app;
        window.firebaseAuth = auth;
        window.firebaseAnalytics = analytics;
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .dashboard-container {
            background: linear-gradient(135deg, #0d1117 0%, #1a1a2e 100%);
        }
        .course-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        .course-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-4px);
            border-color: rgba(88, 166, 255, 0.5);
        }
        .progress-bar {
            background: linear-gradient(90deg, #58a6ff 0%, #79c0ff 100%);
            border-radius: 10px;
            height: 6px;
        }
    </style>
</head>
<body class="bg-ivs-bg text-ivs-text-primary antialiased">
    <!-- PROFESSIONAL HEADER -->
    <header>
        <div class="header-inner">
            <!-- Logo Section -->
            <a href="/" class="header-logo">
                <img alt="IVS Logo" class="header-logo-img" src="/images/logo/logo.svg" onerror="this.onerror=null;this.src='https://placehold.co/40x40/4c5ef7/ffffff?text=IVS';"/>
                <div class="header-logo-text">
                    <span class="header-logo-text-main">IVS Learning Hub</span>
                    <span class="header-logo-text-sub">C·ªïng h·ªçc t·∫≠p & ·ª©ng d·ª•ng</span>
                </div>
            </a>
            
            <!-- Desktop Navigation -->
            <nav class="header-nav">
                <a href="live_index.html" class="header-nav-item">Gi·ªõi Thi·ªáu IVS JSC</a>
                <a href="index.html#applications" class="header-nav-item">·ª®ng D·ª•ng H·ªçc T·∫≠p</a>
                <a href="learning-resources.html" class="header-nav-item">T√†i Nguy√™n EdTech</a>
                <a href="analytics.html" class="header-nav-item">Th·ªëng K√™ (Admin)</a>
            </nav>
            
            <!-- Auth Section (Desktop & Mobile) -->
            <div class="header-auth" id="header-auth-container">
                <button class="header-auth-button header-auth-logout" id="logout-btn" style="gap: 8px;">
                    <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
                </button>
            </div>
            
            <!-- Mobile Menu Toggle -->
            <button class="header-menu-toggle" id="mobile-menu-toggle" aria-label="M·ªü menu">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobile-menu-overlay" role="navigation" aria-label="Mobile Menu">
        <nav class="mobile-nav">
            <a href="live_index.html" class="mobile-nav-item">Gi·ªõi Thi·ªáu IVS JSC</a>
            <a href="index.html#applications" class="mobile-nav-item">·ª®ng D·ª•ng H·ªçc T·∫≠p</a>
            <a href="learning-resources.html" class="mobile-nav-item">T√†i Nguy√™n EdTech</a>
            <a href="analytics.html" class="mobile-nav-item">Th·ªëng K√™ (Admin)</a>
            <div class="mobile-auth">
                <button class="mobile-auth-button" id="logout-btn-mobile" style="background: linear-gradient(135deg, var(--color-error), #dc2626); color: white;">
                    <i class="fas fa-sign-out-alt"></i> ƒêƒÉng Xu·∫•t
                </button>
            </div>
        </nav>
    </div>

<main class="min-h-screen dashboard-container py-12 px-4">
    <div class="max-w-7xl mx-auto">
        <!-- Welcome Section -->
        <div class="mb-12">
            <h1 class="text-4xl font-bold mb-2">Xin ch√†o, <span id="user-name">H·ªçc vi√™n</span>! üëã</h1>
            <p class="text-gray-400">D∆∞·ªõi ƒë√¢y l√† c√°c kh√≥a h·ªçc v√† ·ª©ng d·ª•ng c·ªßa b·∫°n</p>
        </div>

        <!-- Quick Stats -->
        <div id="dashboard-content">
            <!-- User Profile Stats -->
            <div id="dashboard-user-profile" class="mb-8">
                <div class="bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-8 text-white shadow-2xl">
                    <h2 class="text-3xl font-bold mb-2">ƒêang t·∫£i...</h2>
                    <p class="text-blue-100">Ch·ªù x√≠u</p>
                </div>
            </div>

            <!-- Main Content -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mt-8">
                <!-- Posts Section -->
                <div class="lg:col-span-2">
                    <h2 class="text-2xl font-bold mb-6">B√†i vi·∫øt c·ªßa t√¥i</h2>
                    <div id="dashboard-posts" class="space-y-4">
                        <div class="text-center py-12">
                            <i class="fas fa-spinner fa-spin text-gray-400 text-4xl mb-4"></i>
                            <p class="text-gray-500">ƒêang t·∫£i b√†i vi·∫øt...</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats Section -->
                <div class="lg:col-span-1">
                    <h2 class="text-2xl font-bold mb-6">Th·ªëng k√™ nhanh</h2>
                    <div class="space-y-4">
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm opacity-75">T·ªïng b√†i vi·∫øt</p>
                                    <p class="text-2xl font-bold">-</p>
                                </div>
                                <i class="fas fa-file-alt text-2xl opacity-50"></i>
                            </div>
                        </div>
                        <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm opacity-75">L∆∞·ª£t xem</p>
                                    <p class="text-2xl font-bold">-</p>
                                </div>
                                <i class="fas fa-eye text-2xl opacity-50"></i>
                            </div>
                        </div>
                        <div class="bg-gradient-to-br from-pink-500 to-pink-600 rounded-lg p-6 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm opacity-75">L∆∞·ª£t th√≠ch</p>
                                    <p class="text-2xl font-bold">-</p>
                                </div>
                                <i class="fas fa-heart text-2xl opacity-50"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                    <div class="course-card p-4 rounded-lg cursor-pointer hover:bg-blue-500/20">
                        <div class="flex items-start justify-between mb-2">
                            <div class="flex-1">
                                <h4 class="font-semibold text-sm mb-1">IVS English</h4>
                                <p class="text-xs text-gray-400">H·ªçc ti·∫øng Anh</p>
                            </div>
                            <i class="fas fa-globe text-lg opacity-50"></i>
                        </div>
                        <button class="w-full mt-3 bg-blue-600 hover:bg-blue-700 text-white text-xs font-semibold py-2 rounded transition">
                            Truy c·∫≠p
                        </button>
                    </div>

                    <div class="course-card p-4 rounded-lg cursor-pointer hover:bg-green-500/20">
                        <div class="flex items-start justify-between mb-2">
                            <div class="flex-1">
                                <h4 class="font-semibold text-sm mb-1">Testing & Placement</h4>
                                <p class="text-xs text-gray-400">Ki·ªÉm tra tr√¨nh ƒë·ªô</p>
                            </div>
                            <i class="fas fa-check-circle text-lg opacity-50"></i>
                        </div>
                        <button class="w-full mt-3 bg-green-600 hover:bg-green-700 text-white text-xs font-semibold py-2 rounded transition">
                            Truy c·∫≠p
                        </button>
                    </div>

                    <div class="course-card p-4 rounded-lg cursor-pointer hover:bg-purple-500/20">
                        <div class="flex items-start justify-between mb-2">
                            <div class="flex-1">
                                <h4 class="font-semibold text-sm mb-1">IVS Kinderlink</h4>
                                <p class="text-xs text-gray-400">Qu·∫£n l√Ω m·∫ßm non</p>
                            </div>
                            <i class="fas fa-children text-lg opacity-50"></i>
                        </div>
                        <button class="w-full mt-3 bg-purple-600 hover:bg-purple-700 text-white text-xs font-semibold py-2 rounded transition">
                            Truy c·∫≠p
                        </button>
                    </div>
                </div>

                <!-- Logout Button -->
                <button id="logout-btn" class="w-full mt-8 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 rounded-lg transition">
                    <i class="fas fa-sign-out-alt mr-2"></i> ƒêƒÉng xu·∫•t
                </button>
            </div>
        </div>
    </div>
</main>

<footer id="footer-placeholder"></footer>
<div id="fab-container-placeholder"></div>

<script defer src="js/utils.js"></script>
<script defer src="js/language.js"></script>
<script type="module" src="js/dashboard.js"></script>

<script>
    // Logout Handler
    const logoutBtn = document.getElementById('logout-btn');
    const logoutBtnMobile = document.getElementById('logout-btn-mobile');
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
    
    function handleLogout() {
        window.firebaseAuth.signOut().then(() => {
            window.location.href = '/index.html';
        });
    }
    
    if (logoutBtn) {
        logoutBtn.addEventListener('click', handleLogout);
    }
    if (logoutBtnMobile) {
        logoutBtnMobile.addEventListener('click', handleLogout);
    }

    // Mobile Menu Toggle
    if (mobileMenuToggle && mobileMenuOverlay) {
        mobileMenuToggle.addEventListener('click', () => {
            mobileMenuOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        });
        
        mobileMenuOverlay.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenuOverlay.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
        });
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && mobileMenuOverlay.classList.contains('active')) {
                mobileMenuOverlay.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });
    }
</script>

<!-- Universal Loader - Load header, footer, and AIVY chatbot in one go -->
<script defer src="/js/universal-loader.js"></script>

<!-- API Service Initialization -->
<script>
    // Set backend URL - replace with your actual backend URL
    window.BACKEND_URL = window.BACKEND_URL || 'http://localhost:3000';
</script>
<script src="js/api-init.js"></script>
<script src="js/dashboard-loader.js"></script>
<script defer src="/js/universal-loader.js"></script></body>
</html>